{% extends "base_instructor.html" %}
{% import 'bootstrap_wtf.html' as wtf %}

{% block content %}
    <h1>Applications for {{ position.course_section.the_course.name }} - Section {{ position.course_section.section_num }}</h1>
    <div class="postlist mt-4">
        {% if applicants %}
            {% for applicant in applicants %}
                <div class="post-box mb-4 p-3 border rounded light-pink-bg mx-auto">
                    <h5>{{ applicant.student.firstname }} {{ applicant.student.lastname }}: {{ applicant.student.major }} - Class of {{ applicant.student.graduation }} </h5>
                    </p>
                    <p><strong>GPA:</strong> 
                        {{ applicant.student.gpa }}
                    </p>

                    <p><strong>Grade Earned in Course:</strong> 
                        {{ applicant.grade_earned }}
                    </p>

                    <p><strong>Year and Term Took:</strong> 
                        {{ applicant.term_taken }}
                    </p>

                    <p><strong>Applied Year and Term:</strong> 
                        {{ applicant.term_applied }}
                    </p>

                    <p><strong>Courses Served as SA:</strong> 
                        {{ applicant.student.courses_taken }}
                    </p>

                    <p><strong>Application Status:</strong> 
                        {{ applicant.status.name }}
                    </p>
                    
                    

                    {% if applicant.status.name != 'Assigned' %}
                        {% if position.num_sas < position.num_sa_required %}
                            <form action="{{ url_for('main.hire_application', application_id=applicant.id) }}" method="post" style="display: inline-block;">
                                <button type="submit" class="btn btn-white">
                                    Hire
                                </button>
                            </form>
                            <form action="{{ url_for('main.decline_application', application_id=applicant.id) }}" method="post" style="display: inline-block;">
                                <button type="submit" class="btn btn-white">
                                    Decline
                                </button>
                            </form>
                        {% else %}
                            <p>The position is already full.</p>
                        {% endif %}
                    {% endif %}
                </div>
            {% endfor %}
        {% else %}
            <p>No applicants for this position yet.</p>
        {% endif %}
    </div>
{% endblock %}